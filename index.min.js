var xhr=function(){var b=function(){if(typeof XMLHttpRequest!=="undefined"){return new XMLHttpRequest()}else{if(typeof ActiveXObject!=="undefined"){if(typeof arguments.callee.activeXString!=="string"){var g=["MSXML2.XMLHttp.6.0","MSXML2.XMLHttp.3.0","MSXML2.XMLHttp"];for(var f=0,d=g.length;f<d;f++){try{var h=new ActiveXOject(g[f]);arguments.callee.activeXString=g[f];return h}catch(e){continue}}}return new ActiveXObject(arguments.callee.activeXString)}else{throw new Error("no xhr object available")}}};var c=function(e){var d="";for(var g in e){d+=g+"="+e[g]+"&"}return d.slice(0,-1)};var a=function(e){var d=this;var f=b;d.url=e.url;d.type=e.type||"responseText";d.contentType=e.contentType||"application/x-www-form-urlencoded";d.method=e.method||"GET";d.async=e.async||true;d.data=e.data||{};d.complete=e.complete||function(){};d.success=e.success||function(){};d.error=e.error||function(g){alert(d.url+"->status:"+g+"error!")};d.abort=f.abort;d.timeout=e.timeout;d.setData=function(g){for(var h in g){d.data[h]=g[h]}};d.send=function(){var n=d.contentType==="application/x-www-form-urlencoded"?c(d.data):d.data,j,g=false,i=d.async,k=d.complete,m=d.method,h=d.type,l=d.contentType;if(m==="GET"){d.url+="?"+n;g=true}f.open(m,d.url,i);if(!g){f.setRequestHeader("Content-type",l);j=n}f.onreadystatechange=i?function(){if(f.readyState==4){k();if(f.status==200){d.success(f[h])}else{d.error(f.status)}}}:null;f.send(j);if(!i){k();d.success(f[h])}};d.url&&d.send()};return function(d){return new a(d)}}();module.exports=xhr;
